(()=>{"use strict";(e=>{let t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),l=document.querySelector("#timer-seconds");const n=()=>{let e=function(){let e=(new Date("17 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();e.hours>=10?t.textContent=e.hours:t.textContent=`0${e.hours}`,e.minutes>=10?o.textContent=e.minutes:o.textContent=`0${e.minutes}`,e.seconds>=10?l.textContent=e.seconds:l.textContent=`0${e.seconds}`,e.timeRemaining<0&&(t.textContent="00",o.textContent="00",l.textContent="00",clearInterval(r))},r=()=>{setInterval((()=>{n()}),1e3)};n(),r()})(),(()=>{const e=document.querySelector("menu"),t=e.querySelectorAll("ul>li>a");document.querySelector("body").addEventListener("click",(o=>{let l=o.target;const n=e=>{console.log("target: ",e);let t=e.getAttribute("href").substring(1);const l=document.getElementById(t).getBoundingClientRect().top;o.preventDefault(),window.scrollBy({top:l,behavior:"smooth"})};l.closest('img[src="images/scroll.svg"]')&&n(l.parentNode),t.forEach((t=>{t===l&&null!==scrollTo&&(n(l),e.classList.toggle("active-menu"))}))}))})(),(()=>{const e=document.querySelector("body"),t=document.querySelector("menu");e.addEventListener("click",(e=>{let o=e.target;o.closest(".close-btn")||o.closest(".menu")?t.classList.toggle("active-menu"):o.closest("menu")||t.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup"),t=e.querySelector(".popup-content");document.querySelectorAll(".popup-btn").forEach((o=>{o.addEventListener("click",(()=>{window.innerWidth>768?(e.style.display="block",function(){let e=window.innerWidth-window.innerWidth;t.style.left=`${e}px`;const o=setInterval((()=>{e+=25,t.style.left=`${e}px`,e>=(40+window.innerWidth-t.offsetWidth)/2&&clearTimeout(o)}),8)}()):e.style.display="block"}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let l=e.target;l=l.closest(".service-header-tab"),l&&t.forEach(((e,n)=>{e===l&&(e=>{for(let l=0;l<o.length;l++)e===l?(t[l].classList.add("active"),o[l].classList.remove("d-none")):(t[l].classList.remove("active"),o[l].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots")),o=document.querySelector(".portfolio-content");let l,n=0;const r=(e.forEach(((e,o)=>{const l=document.createElement("li");t.appendChild(l),0===o?l.classList.add("dot","dot-active"):l.classList.add("dot")})),document.querySelectorAll(".dot")),c=(e,t,o)=>{e[t].classList.remove(o)},a=(e,t,o)=>{e[t].classList.add(o)},s=()=>{c(e,n,"portfolio-item-active"),c(r,n,"dot-active"),n++,n>=e.length&&(n=0),a(e,n,"portfolio-item-active"),a(r,n,"dot-active")},u=(e=3e3)=>{l=setInterval(s,e)};o.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(c(e,n,"portfolio-item-active"),c(r,n,"dot-active"),o.matches("#arrow-right")?n++:o.matches("#arrow-left")?n--:o.matches(".dot")&&r.forEach(((e,t)=>{e===o&&(n=t)})),n>=e.length?n=0:n<0&&(n=e.length-1),a(e,n,"portfolio-item-active"),a(r,n,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(l)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(5500)})(),document.querySelectorAll(".command__photo").forEach((e=>{let t=e.src;e.addEventListener("mouseover",(t=>{let o=t.target;e===o&&(o.src=o.dataset.img)})),e.addEventListener("mouseout",(e=>{e.target.src=t}))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=document.querySelector(".calc-square"),n=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),c=document.getElementById("total");t.addEventListener("change",(t=>{let a=t.target;(a.matches("select")||a.matches("input"))&&(()=>{let t=0,a=1,s=1;const u=o.options[o.selectedIndex].value,i=+l.value;r.value>1&&(a+=(r.value-1)/10),n.value&&n.value<5?s*=2:n.value&&n.value<10&&(s*=1.5),u&&i&&(t=Math.floor(e*u*i*a*s)),c.textContent=t})()})),t.addEventListener("input",(e=>{let t=e.target;t.matches("input")&&(t.value=t.value.replace(/\D/g,""))}))})(100),(()=>{const e=document.querySelectorAll("input");e.forEach((e=>{e.addEventListener("input",(e=>{let t=e.target;t.closest("#form1-name")||t.closest("#form2-name")||t.closest("#form3-name")?t.value=t.value.replace(/[a-zA-Z0-9=+()*?:;№"!%$#@^<>/"']/g,""):t.matches("#form2-message")?t.value=t.value.replace(/[a-zA-Z+=(){}%^#@<>]/g,""):t.closest("#form1-email")||t.closest("#form2-email")||t.closest("#form3-email")?t.value=t.value.replace(/[ а-яА-ЯЁё\-+"%/&?#$(){}]/g,""):(t.closest("#form1-phone")||t.closest("#form2-phone")||t.closest("#form3-phone"))&&(t.value=t.value.replace(/[=?/{}^#@"'<>!.:;,A-Za-zа-яА-ЯЁё]/g,""))}))})),e.forEach((e=>{e.addEventListener("blur",(e=>{let t=e.target;t.closest("#form1-name")||t.closest("#form2-name")||t.closest("#form3-name")?(t.value=t.value.replace(/ +/g," ").trim(),t.value=t.value.replace(/-+/g,"").trim(),t.value=t.value.replace(/(.|\s'')/g,(function(e){return e.toLowerCase()})),t.value=t.value.trim().replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))):t.matches("#form2-message")&&(t.value=t.value.replace(/ +/g," ").trim(),t.value=t.value.replace(/^-+|-+$/g,"").trim(),t.value=t.value.replace(/-+/g,"-").trim())}))}))})(),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.cssText="font-size: 2rem;",t.style.cssText="color: #fff;";const o=(e,l,n)=>{clearTimeout(o),e.appendChild(t),t.textContent=l,setTimeout((()=>{t.textContent=""}),n)};e.forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault();let t=e.target;const l=t.querySelectorAll("input"),n=t.querySelector('input[type="text"]'),r=t.querySelector('input[type="tel"]'),c=new FormData(t);let a={};var s;c.forEach(((e,t)=>{e&&(a[t]=e)})),Object.keys(a).length===l.length?n.value.length>2&&r.value.replace(/ /g,"").length<12&&r.value.replace(/ /g,"").length>7?(o(t,"Загрузка...",1e4),(s=a,fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"})).then((e=>{if(200!==e.status)throw new Error("network status is not 200");o(t,"Спасибо! Мы скоро с вами свяжемся!",3e3)})).then(l.forEach((e=>{setTimeout((()=>{e.value=""}),2e3)}))).then(setTimeout((()=>{document.querySelector(".popup").style.display="none"}),5e3)).catch((e=>{o(t,"Что то пошло не так...",3e3),console.log(e)}))):o(t,"Введите корректные данные!",3e3):o(t,"Необходимо заполнить все поля!",3e3)}))}))})()})();